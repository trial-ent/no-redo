/* 
 * (c) 2017 TRIAL.
 * Created on 17/12/2016, 15:04:26.
 * Moved to here on 18/06/2017, 21:01:29.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

'use strict';

( ( T ) => {
  
    T.elements.custom( T.elements.TRL_LOGO, class extends HTMLElement {
        
        constructor() {
            super();
        }
        
        connectedCallback() {
            this.setup();
        }
        
        static get observedAttributes() {
            return ['trl-slogan', 'trl-color', 'trl-theme', 'trl-scale', 'trl-width', 'trl-height'];
        }
        
        attributeChangedCallback( name, oldValue, newValue ) {
            this.setup();
        }
        
        set slogan( slogan ) {
            this.setAttribute( 'trl-slogan', slogan === true ? 'true' : 'false' );
        }
        
        get slogan() {
            return ( this.getAttribute( 'trl-slogan' ) || 'false' ) === 'true';
        }
        
        set color( color ) {
            this.setAttribute( 'trl-color', color );
        }
        
        get color() {
            return this.getAttribute( 'trl-color' ) || '#24c742';
        }
        
        set theme( theme ) {
            this.setAttribute( 'trl-theme', theme );
        }
        
        get theme() {
            return this.getAttribute( 'trl-theme' ) || 'light';
        }
        
        set scale( scale ) {
            this.setAttribute( 'trl-scale', scale );
        }
        
        get scale() {
            return this.getAttribute( 'trl-scale' ) || 1;
        }
        
        set width( width ) {
            this.setAttribute( 'trl-width', width );
        }
        
        get width() {
            return this.getAttribute( 'trl-width' ) || ( this.slogan ? 437.89 : 120.45 );
        }
        
        set height( height ) {
            this.setAttribute( 'trl-height', height );
        }
        
        get height() {
            return this.getAttribute( 'trl-height' ) || ( this.slogan ? 135.5 : 135.5 );
        }
        
        setup() {
            this.style.cssFloat = 'left';
            
            if ( this.scale ) {
                this.style.width  = ( this.width / ( 1 / this.scale ) ) + 'px';
                this.style.height = ( this.height / ( 1 / this.scale ) ) + 'px';
            } else {
                this.style.width  = this.width + 'px';
                this.style.height = this.height + 'px';
            }
          
            T.load( 'design', function () {
                var colorVar1 = new T.Color(this.color).to('hsl');
                colorVar1.l = ((((colorVar1.l * 255) / 100) - 8) * 100) / 255;
                colorVar1 = new T.Color(colorVar1).to('hex', true);

                var colorVar2 = new T.Color(colorVar1).to('hsl');
                colorVar2.l = ((((colorVar2.l * 255) / 100) - 8) * 100) / 255;
                colorVar2 = new T.Color(colorVar2).to('hex', true);
                
                var colorSlogan = this.theme === 'light' ? '#333' : '#fff';

                this.innerHTML = this.slogan ? 
                      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 437.89 135.5"><g fill="${ colorSlogan }"><path d="M97.92 69.38l-.4 6.18-.14.04q-1.56-2.33-5.3-3.03-1.18-.23-2.27-.23-1.08 0-1.85.19-.76.19-1.3.55-1.16.75-1.16 1.97 0 1.6 1 2.4 1.27.97 4.19 1.37 2.92.38 4.69 1.05 1.77.67 2.9 1.7 2.15 1.94 2.15 5.47 0 4.63-3.5 7.13-2.98 2.14-7.52 2.14-3.66 0-7.24-1.38-1.18-.47-2.06-1.08l.23-7.02.09-.06q2.6 4.5 8.56 4.5 4.22 0 5.59-2.04.46-.7.46-1.54 0-.86-.27-1.4-.27-.58-.9-.97-1.23-.8-4.1-1.08-2.89-.27-4.72-1.03-1.83-.75-2.92-1.87-1.98-2.02-1.98-5.64 0-3.74 2.63-6.05 2.67-2.36 7.2-2.36 4.54 0 7.94 2.09zM103.98 84.91q0-2.31.78-4.41.8-2.13 2.27-3.7 3.22-3.41 8.35-3.41 5.11 0 8.12 3.22 2.88 3.07 2.88 7.97t-2.96 8.11q-3.14 3.41-8.31 3.41-5.34 0-8.37-3.34-2.76-3.05-2.76-7.85zm5.11-.12q0 1.32.45 2.56.44 1.24 1.26 2.13 1.74 1.91 4.58 1.91 2.63 0 4.15-1.87Q121 87.7 121 84.8q0-2.95-1.52-4.76-1.62-1.93-4.43-1.93-2.86 0-4.48 2.06-1.48 1.9-1.48 4.6zM136.4 89.7q0 4.74.18 6.08h-5.5V73.81h5.33v1.89q2.88-2.31 5.9-2.31 3.58 0 5.2 3.09 1.62-1.66 2.7-2.19 1.78-.9 3.57-.9 1.8 0 3.07.6 1.26.62 2.08 1.73 1.66 2.25 1.66 6.18v8.37q0 3.56.1 4.27.11.72.28.93.19.2.31.38l-.04.08q-1.68-.15-2.48-.15h-1.58q-.77 0-1.91.07V84.47q0-4.92-1.51-5.85-.5-.3-1.2-.3-.68 0-1.2.18-.53.14-.99.5-.78.57-1.77 2.23.03.17.03.34t0 5.55.25 8.66h-3.05q-1.24 0-2.38.07v-11.4q0-3.43-.42-4.46-.4-1.03-.86-1.35t-1.14-.31q-2.77 0-4.62 2.67v8.7zM165.14 84.91q0-2.31.77-4.41.8-2.13 2.27-3.7 3.22-3.41 8.35-3.41 5.11 0 8.12 3.22 2.88 3.07 2.88 7.97t-2.96 8.11q-3.14 3.41-8.31 3.41-5.34 0-8.37-3.34-2.75-3.05-2.75-7.85zm5.1-.12q0 1.32.45 2.56.44 1.24 1.26 2.13 1.74 1.91 4.58 1.91 2.63 0 4.15-1.87 1.47-1.81 1.47-4.71 0-2.95-1.52-4.76-1.62-1.93-4.43-1.93-2.86 0-4.48 2.06-1.47 1.9-1.47 4.6zM199.29 96.1q-5.94 0-8.94-2.17.04-.63.12-1.43l.2-1.51.2-1.85q.05-.38.07-.4.02-.05.33.33.32.36 1.2.89.88.52 2.04.92 2.5.86 5.22.86 3.63 0 3.63-2.42 0-.77-.69-1.15-1.24-.63-3.66-.95-2.4-.33-3.93-.97t-2.5-1.5q-1.8-1.67-1.8-4.36 0-3.28 2.53-5.15 2.5-1.86 6.92-1.86 4.38 0 7.47 2.49-.15.54-.32 1.05-.48 1.39-.71 2l-.49 1.24q-.04.16-.06.16-.04 0-.34-.44-1.32-1.53-4.12-2.02-.86-.16-1.76-.16-3.83 0-3.83 2.3 0 .8.8 1.23 1.49.8 4.08 1.18 2.6.37 3.95 1.03 1.35.63 2.17 1.53 1.51 1.64 1.51 4.35 0 2.97-2.38 4.82-2.48 1.96-6.91 1.96zM227.12 67.54q1.69-2.63 3.52-4.63l4.52 3.56q-.9 1.11-1.68 2.18l-1.62 2.3-4.74-3.41zm5.54 25.89q0 1.8.08 2.35h-5.34V73.8h5.26v19.62zM244.1 93.1q0 1.84.17 2.68h-5.28V73.81h5.11v1.87q2.78-2.3 5.93-2.3 3.45 0 5.51 2.36 2.06 2.34 2.06 6.16v8.37q0 3.56.1 4.27.11.72.28.93.19.2.31.38l-.04.08q-1.7-.15-2.48-.15h-1.47q-.67 0-1.81.07V84.38q0-6.16-3.74-6.16-2.78 0-4.65 2.86V93.1zM271.12 96.1q-5.93 0-8.94-2.17.04-.63.13-1.43l.19-1.51.2-1.85q.05-.38.07-.4.02-.05.34.33.31.36 1.2.89.88.52 2.04.92 2.5.86 5.21.86 3.64 0 3.64-2.42 0-.77-.7-1.15-1.23-.63-3.65-.95-2.4-.33-3.94-.97t-2.5-1.5q-1.79-1.67-1.79-4.36 0-3.28 2.53-5.15 2.5-1.86 6.92-1.86 4.37 0 7.46 2.49l-.31 1.05-.72 2-.48 1.24q-.04.16-.07.16-.04 0-.33-.44-1.33-1.53-4.12-2.02-.87-.16-1.77-.16-3.83 0-3.83 2.3 0 .8.8 1.23 1.5.8 4.08 1.18 2.6.37 3.95 1.03 1.35.63 2.17 1.53 1.52 1.64 1.52 4.35 0 2.97-2.38 4.82-2.48 1.96-6.92 1.96zM290.8 95.35v6.18q0 1.8.09 2.36h-5.24V73.8h5.15v1.37q2.55-1.79 4.88-1.79t4.14.65 3.18 2.02q3 2.97 3 8.46 0 3.64-1.7 6.5-1.45 2.41-4.01 3.86-2.28 1.29-4.93 1.29-2.64 0-4.56-.82zm0-5.3q1.6 1.34 4.14 1.34 4.17 0 5.39-4.01.42-1.37.42-2.93 0-1.57-.3-2.5-.3-.94-.77-1.62-.47-.7-1.06-1.13-.58-.47-1.2-.74-1.07-.48-2.2-.48-1.14 0-2.36.52t-2.06 1.41v10.14zM309.73 67.54q1.69-2.63 3.52-4.63l4.52 3.56q-.9 1.11-1.69 2.18l-1.61 2.3-4.74-3.41zm5.53 25.89q0 1.8.09 2.35H310V73.8h5.25v19.62zM326.13 93.43q0 1.8.08 2.36h-5.23V73.8h5.15v1.62q1.79-2.04 3.74-2.04 1.98 0 3.12.48l-.38 5.66-.09.06q-.73-1.3-3.05-1.3-.88 0-1.8.6-.9.6-1.54 1.59v12.95zM350.06 94.48q-2.98 1.62-5.4 1.62t-4.14-.44q-1.73-.47-2.93-1.35-2.44-1.79-2.44-5.17 0-3.03 3-5.05 3.23-2.19 8.78-2.19l.84.02.57.05q.32 0 .57.04-.17-3.37-2.9-3.93-.9-.2-1.94-.2-1 0-2 .2-.96.16-1.89.46-2.04.65-2.92 1.5l-.07-.05-.63-4.65q3.73-1.95 8.14-1.95 6.86 0 8.77 4.94.61 1.58.61 3.55v7.62q0 2.43 1.73 3.32L352 96.3q-1.2-.63-1.94-1.83zm-1.13-8.69q-.57-.1-1.18-.1h-.84q-4.65 0-5.9 2.06-.39.6-.39 1.28t.23 1.2q.26.5.82.84 1.1.63 3.24.63 2.17 0 4.04-1.03-.02-.23-.02-.48v-4.4zM375.7 94.6q-2.67 1.5-5.34 1.5t-4.67-.84q-2-.84-3.4-2.31-2.91-3.03-2.91-7.87 0-5 3.36-8.33 3.39-3.36 8.67-3.36 1.62 0 3.17.42v-9.36h5.15v22.48q0 2.8.26 3.66.27.86.59 1.26.33.4.84.76l-3.96 3.5q-1.09-.6-1.76-1.5zm-4.36-3.34q1.77 0 3.24-.67V78.94q-1.47-.6-3.2-.6t-2.96.45q-1.22.47-2.1 1.29-1.85 1.72-1.85 4.48 0 3 1.68 4.8 1.8 1.9 5.2 1.9zM384.17 84.91q0-2.31.78-4.41.8-2.13 2.27-3.7 3.22-3.41 8.35-3.41 5.11 0 8.12 3.22 2.88 3.07 2.88 7.97t-2.96 8.11q-3.14 3.41-8.31 3.41-5.34 0-8.37-3.34-2.76-3.05-2.76-7.85zm5.11-.12q0 1.32.45 2.56t1.26 2.13q1.74 1.91 4.58 1.91 2.63 0 4.15-1.87 1.47-1.81 1.47-4.71 0-2.95-1.52-4.76-1.62-1.93-4.43-1.93-2.86 0-4.48 2.06-1.48 1.9-1.48 4.6zM418.32 96.1q-5.93 0-8.93-2.17.04-.63.12-1.43l.2-1.51.2-1.85q.05-.38.07-.4.02-.05.33.33.32.36 1.2.89.88.52 2.04.92 2.5.86 5.22.86 3.63 0 3.63-2.42 0-.77-.69-1.15-1.24-.63-3.66-.95-2.4-.33-3.93-.97t-2.5-1.5q-1.8-1.67-1.8-4.36 0-3.28 2.53-5.15 2.5-1.86 6.92-1.86 4.38 0 7.47 2.49-.15.54-.32 1.05-.48 1.39-.71 2l-.49 1.24q-.04.16-.06.16-.04 0-.34-.44-1.32-1.53-4.12-2.02-.86-.16-1.77-.16-3.82 0-3.82 2.3 0 .8.8 1.23 1.49.8 4.08 1.18 2.6.37 3.95 1.03 1.35.63 2.17 1.53 1.51 1.64 1.51 4.35 0 2.97-2.38 4.82-2.48 1.96-6.92 1.96zM431.75 95.79q.18-1.29.18-2.27 0-1-.02-1.35 0-.38-.02-.74t-.04-.67l-.06-.52h6.1q-.07.8-.07 1.3l-.04.88v1.52q0 1.09.1 1.85h-6.13zM81.69 106.92q2.1.08 2.54.08h1.52q1.11 0 1.78-.16l-.02 28.13H81.7v-28.05zM102.3 135.29q-5.93 0-8.94-2.17.04-.63.13-1.43l.18-1.51.22-1.85q.04-.38.06-.4.02-.04.33.34.32.35 1.2.88.89.52 2.04.92 2.5.87 5.22.87 3.64 0 3.64-2.42 0-.78-.7-1.16-1.24-.63-3.66-.95-2.4-.33-3.93-.96-1.53-.63-2.5-1.52-1.79-1.66-1.79-4.35 0-3.28 2.52-5.15 2.5-1.85 6.92-1.85 4.38 0 7.47 2.48-.15.55-.32 1.05-.48 1.39-.71 2l-.49 1.24q-.04.17-.06.17-.04 0-.33-.44-1.33-1.54-4.13-2.02-.86-.17-1.76-.17-3.83 0-3.83 2.31 0 .8.8 1.22 1.5.8 4.08 1.18 2.6.38 3.95 1.03 1.35.63 2.17 1.53 1.51 1.64 1.51 4.36 0 2.96-2.37 4.81-2.49 1.96-6.92 1.96zM123.92 135.29q-5.93 0-8.94-2.17.04-.63.12-1.43l.2-1.51.2-1.85q.05-.38.07-.4.02-.04.33.34.32.35 1.2.88.89.52 2.04.92 2.5.87 5.22.87 3.64 0 3.64-2.42 0-.78-.7-1.16-1.24-.63-3.66-.95-2.4-.33-3.93-.96-1.54-.63-2.5-1.52-1.79-1.66-1.79-4.35 0-3.28 2.52-5.15 2.5-1.85 6.92-1.85 4.38 0 7.47 2.48-.15.55-.32 1.05-.48 1.39-.71 2l-.49 1.24q-.04.17-.06.17-.04 0-.34-.44-1.32-1.54-4.12-2.02-.86-.17-1.76-.17-3.83 0-3.83 2.31 0 .8.8 1.22 1.49.8 4.08 1.18 2.6.38 3.95 1.03 1.35.63 2.17 1.53 1.51 1.64 1.51 4.36 0 2.96-2.38 4.81-2.48 1.96-6.91 1.96zM136.54 124.1q0-2.3.77-4.41.8-2.12 2.28-3.7 3.21-3.4 8.34-3.4 5.11 0 8.12 3.2 2.88 3.08 2.88 7.98t-2.96 8.12q-3.14 3.4-8.3 3.4-5.35 0-8.38-3.34-2.75-3.05-2.75-7.84zm5.1-.12q0 1.32.45 2.56t1.26 2.13q1.75 1.91 4.58 1.91 2.63 0 4.15-1.87 1.47-1.8 1.47-4.71 0-2.94-1.51-4.75-1.62-1.94-4.44-1.94-2.86 0-4.48 2.06-1.47 1.9-1.47 4.6zM182.84 113.8q2.35-1.22 4.81-1.22t4.23.78q1.79.76 3.13 2.19 2.93 3.17 2.93 8.03 0 5.32-3.18 8.58-3.05 3.13-7.59 3.13-4 0-6.58-2.08-2.9-2.35-2.9-6.5V103.7h5.15v10.11zm0 12.85q0 3.7 4.6 3.7 2.25 0 3.79-1.98 1.56-2.01 1.56-5.02 0-3.03-1.64-4.57-1.48-1.36-3.96-1.36-1.5 0-3.3 1-.57.32-1.05.7v7.53zM217.08 133.67q-2.99 1.62-5.4 1.62t-4.15-.44q-1.72-.46-2.92-1.35-2.44-1.78-2.44-5.17 0-3.03 2.99-5.05 3.23-2.18 8.79-2.18l.84.02.56.04q.32 0 .57.04-.17-3.36-2.9-3.93-.9-.19-1.93-.19-1.01 0-2 .19-.97.17-1.9.46-2.03.65-2.92 1.5l-.06-.05-.63-4.64q3.72-1.96 8.14-1.96 6.85 0 8.77 4.94.6 1.58.6 3.56v7.6q0 2.45 1.73 3.33l-3.8 3.5q-1.2-.64-1.94-1.84zm-1.14-8.68q-.56-.1-1.17-.1h-.85q-4.64 0-5.9 2.05-.38.61-.38 1.28 0 .68.23 1.2.25.5.82.84 1.1.64 3.24.64 2.16 0 4.03-1.03-.02-.24-.02-.49v-4.4zM235.03 135.29q-5.93 0-8.93-2.17.04-.63.12-1.43l.2-1.51.2-1.85q.04-.38.06-.4.03-.04.34.34.32.35 1.2.88.88.52 2.04.92 2.5.87 5.21.87 3.64 0 3.64-2.42 0-.78-.7-1.16-1.23-.63-3.65-.95-2.4-.33-3.93-.96-1.54-.63-2.5-1.52-1.8-1.66-1.8-4.35 0-3.28 2.53-5.15 2.5-1.85 6.92-1.85 4.37 0 7.46 2.48-.14.55-.31 1.05-.48 1.39-.72 2l-.48 1.24q-.04.17-.06.17-.04 0-.34-.44-1.32-1.54-4.12-2.02-.86-.17-1.77-.17-3.82 0-3.82 2.31 0 .8.8 1.22 1.49.8 4.07 1.18 2.61.38 3.96 1.03 1.34.63 2.16 1.53 1.52 1.64 1.52 4.36 0 2.96-2.38 4.81-2.48 1.96-6.92 1.96zM259 130.35q2.72 0 3.73-1.41h.17l.06 4.88q-1.03 1.03-3.83 1.36-.75.1-1.89.1-1.11 0-2.44-.41-1.3-.42-2.23-1.37-1.91-1.96-1.91-6.12v-9.55h-3.18q-.02-.6-.02-1.24v-3.24q0-.35.02-.35h3.18v-6h5.15v6h5.78v4.83h-5.78v8.58q0 3.3 1.83 3.77.59.17 1.37.17zM281.76 133.67q-2.98 1.62-5.4 1.62t-4.14-.44q-1.73-.46-2.93-1.35-2.44-1.78-2.44-5.17 0-3.03 3-5.05 3.23-2.18 8.78-2.18l.84.02.57.04q.32 0 .57.04-.17-3.36-2.9-3.93-.9-.19-1.94-.19-1 0-2 .19-.96.17-1.89.46-2.04.65-2.92 1.5l-.07-.05-.63-4.64q3.73-1.96 8.14-1.96 6.86 0 8.77 4.94.61 1.58.61 3.56v7.6q0 2.45 1.73 3.33l-3.81 3.5q-1.2-.64-1.94-1.84zm-1.13-8.68q-.57-.1-1.18-.1h-.84q-4.65 0-5.9 2.05-.39.61-.39 1.28 0 .68.23 1.2.26.5.82.84 1.1.64 3.24.64 2.17 0 4.04-1.03-.02-.24-.02-.49v-4.4z"/></g><g fill-rule="evenodd"><path T fill="${ this.color }" d="M86.86 1.77c-.01.7 0 28.3 0 28.3h-57.9v30.06H83.5a15 15 0 0010.58-4.34l25.6-24.4c.78-.79.78-1.85 0-2.63L89.94.55a1.8 1.8 0 00-3.08 1.22z"/><path T fill="${ colorVar1 }" d="M5.06 30.07a5.06 5.06 0 00-5.07 5.09v19.89c0 2.4 1.65 4.4 3.87 4.94 2.04-.1 4.37-.1 7.07-.1 20.24 0 20.26.02 20.26 44.07 0 11.97 0 20.7-.42 27.07 0 0-.1.91.15 1.7.24.79.93 1.37.93 1.37.88.75 2.02 1.2 3.28 1.2h19.94c2.8 0 5.06-2.27 5.06-5.08V60.14s0-30.05-30.04-30.07H5.06z"/><path T fill="${ colorVar2 }" d="M12.94 52.63c-5.36 0-9.6 0-12.94.5v1.92c0 2.4 1.64 4.4 3.87 4.94 2.03-.1 4.36-.1 7.06-.1 20.24 0 20.26.02 20.26 44.07 0 11.97 0 20.7-.42 27.07 0 0-.1.91.15 1.7.24.79.93 1.37.93 1.37.88.75 2.02 1.2 3.28 1.2h3.2c.2-7.1.2-15.94.2-26.99 0-55.66-.03-55.68-25.59-55.68z"/></g></svg>` : 
                      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120.45 135.5"><path T fill="${ this.color }" fill-rule="evenodd" d="M86.99 1.77v28.34H29.01v30.1h54.62c4.4 0 8.13-1.88 10.59-4.34l25.64-24.44c.78-.79.78-1.85 0-2.63L90.08.55a1.8 1.8 0 00-3.09 1.22z"/><path T fill="${ colorVar1 }" fill-rule="evenodd" d="M5.07 30.11A5.07 5.07 0 000 35.21v19.91c0 2.41 1.64 4.42 3.87 4.96 2.04-.1 4.37-.1 7.08-.1 20.26 0 20.29.01 20.29 44.13 0 11.99 0 20.73-.42 27.1 0 0-.1.92.14 1.71.24.8.93 1.37.93 1.37a5.04 5.04 0 003.3 1.2h19.96a5.07 5.07 0 005.07-5.09V60.22s0-30.1-30.08-30.11H5.07z"/><path T fill="${ colorVar2 }" fill-rule="evenodd" d="M12.96 52.7c-5.37 0-9.6 0-12.96.5v1.92c0 2.41 1.64 4.42 3.87 4.96 2.04-.1 4.37-.1 7.08-.1 20.26 0 20.29.01 20.29 44.13 0 11.99 0 20.73-.42 27.1 0 0-.1.92.14 1.71.24.8.93 1.37.93 1.37a5.04 5.04 0 003.3 1.2h3.2c.2-7.11.2-15.96.2-27.02 0-55.75-.03-55.77-25.63-55.77z"/></svg>`;
            }.bind(this) );

        }
        
    }, "TRIAL.Logo" );

    window.dispatchEvent( new CustomEvent( 'T.elements.TRIAL.Logo.loaded' ) );
  
} )( window.T || {} );